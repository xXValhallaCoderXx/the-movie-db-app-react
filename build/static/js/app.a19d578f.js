(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"./src/index.tsx":function(e,t,n){"use strict";n.r(t);n("./src/shared/styles/index.scss");var r=n("./node_modules/react/index.js"),a=n.n(r),o=n("./node_modules/react-dom/index.js"),c=n("./src/routes.tsx"),l=document.getElementById("render-app");Object(o.render)(a.a.createElement(c.a,null),l)},"./src/pages/home/home.module.scss":function(e,t,n){e.exports={search_container:"search_container_1LNED7s1",home_view_wrapper:"home_view_wrapper_1rhxlJuC",row:"row_1p63qNWc",column:"column_mGQciuCM",search_wrapper:"search_wrapper_3tzKtCOn",detail_wrapper:"detail_wrapper_1QuMR1X1"}},"./src/pages/index.ts":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),a=n.n(r),o=n("./node_modules/react-router/esm/react-router.js"),c=function(e){if(e.ok)return e;var t=new Error(e.statusText);throw t.response=e,t},l=function(e){return e.json()},i="1f4b653c77653b672a601004bfe67922",s={latestMovies:function(){var e="https://api.themoviedb.org/3/movie/top_rated?api_key=".concat(i);return fetch(e).then(c).then(l)},searchMovie:function(e,t){var n="https://api.themoviedb.org/3/search/movie?query=".concat(e,"&page=").concat(t,"&api_key=").concat(i);return fetch(n).then(c).then(l)},fetchMovieMeta:function(e){return Promise.all([fetch("https://api.themoviedb.org/3/movie/".concat(e,"?&api_key=").concat(i)).then(function(e){return e.json()}),fetch("https://api.themoviedb.org/3/movie/".concat(e,"/reviews?&api_key=").concat(i)).then(function(e){return e.json()}),fetch("https://api.themoviedb.org/3/movie/".concat(e,"/credits?&api_key=").concat(i)).then(function(e){return e.json()}),fetch("https://api.themoviedb.org/3/movie/".concat(e,"/similar?&api_key=").concat(i)).then(function(e){return e.json()})]).then(function(e){return e}).catch(function(e){return e})}},u=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},m=function(e,t,n){return t||(t=200),null==n&&(n="..."),e.length>t?e.substring(0,t-n.length)+n:e};function d(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var f=function(e){return e.map(function(e){return{id:e.id,title:e.title}})},p=function(e){var t=e.pages,n=e.goTo;return a.a.createElement("div",null,t.map(function(e,t){return a.a.createElement("button",{className:"bg-gray-400 hover:bg-gray-700 text-black font-bold py-2 px-4 m-1",key:t,onClick:n,value:t},t+1)}))};function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var E=function(e){var t=Object(o.h)(),n=v(a.a.useState(0),2),r=n[0],c=n[1],l=v(a.a.useState([[]]),2),i=l[0],s=l[1];a.a.useEffect(function(){var t,n;s((t=e.data,n=[],d(Array(Math.ceil(t.length/10))).forEach(function(e,r){n.push(t.slice(0+10*r,10+10*r))}),n))},[]);var u=["text-sm","w-full","bg-white shadow-md rounded my-6","fixed"===e.type&&"table-fixed","auto"===e.type&&"table-auto"].filter(Boolean).join(" "),m=function(t){return function(){e.onRowClick&&e.onRowClick(t)}};function f(e){if(e.id===t.movieID)return"border 2px black"}return a.a.createElement("div",null,a.a.createElement("table",h({className:u},e),a.a.createElement("thead",null,a.a.createElement("tr",null,function(){var t;if(e.headers)t=e.headers;else{var n=e.data[0];t=Object.keys(n)}return t.map(function(e,t){return a.a.createElement("th",{className:"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light text-left",key:t},e.toUpperCase())})}())),a.a.createElement("tbody",null,i[r].map(function(e,t){return a.a.createElement("tr",{className:"",style:{border:f(e)},onClick:m(e),key:.1*t},Object.values(e).map(function(e){return a.a.createElement("td",{className:"py-4 px-6 border-b border-grey-light cursor-pointer",key:.2*t},e)}))}))),a.a.createElement("div",{className:"mt-2"},a.a.createElement(p,{pages:i,goTo:function(e){c(e.target.value)}})))},g=function(e){var t=e.children,n=e.mobile;return a.a.createElement("div",{className:""},a.a.createElement(_,{mobile:n}),a.a.createElement("div",{className:"h-auto"},t))},b=function(e){return a.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:e.id,type:e.type||"text",placeholder:e.placeholder,onChange:e.onChange})},w=n("./src/shared/components/loader/styles.module.scss"),y=function(){return a.a.createElement("div",{className:"mx-auto ".concat(w.loader)})},x=n("./node_modules/react-router-dom/esm/react-router-dom.js"),_=function(e){e.mobile,Object(o.h)();return a.a.createElement("nav",{className:"flex items-center justify-between flex-wrap bg-tmd-dark p-4 fixed w-full"},a.a.createElement("div",{className:"flex items-center flex-shrink-0 text-white mr-6"},a.a.createElement("svg",{className:"fill-current h-8 w-8 mr-2",width:"54",height:"54",viewBox:"0 0 54 54",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M13.5 22.1c1.8-7.2 6.3-10.8 13.5-10.8 10.8 0 12.15 8.1 17.55 9.45 3.6.9 6.75-.45 9.45-4.05-1.8 7.2-6.3 10.8-13.5 10.8-10.8 0-12.15-8.1-17.55-9.45-3.6-.9-6.75.45-9.45 4.05zM0 38.3c1.8-7.2 6.3-10.8 13.5-10.8 10.8 0 12.15 8.1 17.55 9.45 3.6.9 6.75-.45 9.45-4.05-1.8 7.2-6.3 10.8-13.5 10.8-10.8 0-12.15-8.1-17.55-9.45-3.6-.9-6.75.45-9.45 4.05z"})),a.a.createElement(x.a,{to:"/movies"},a.a.createElement("span",{className:"font-semibold text-xl tracking-tight text-tmd-green hover:text-tmd-light cursor-pointer"},"The Movie DB App"))),a.a.createElement("a",{href:"#",className:"inline-block text-sm px-4 py-2 leading-none border rounded text-tmd-green border-tmd-green hover:border-transparent hover:text-tmd-dark hover:bg-tmd-light mt-4 lg:mt-0"},"Back"))},N=function(e){e.color;var t=e.children;return a.a.createElement("span",{className:"inline-block bg-teal-500 text-white text-xs px-2 py-1 rounded-full uppercase font-semibold tracking-wide mr-2"},t)},k=function(e){var t=e.id,n=e.poster_path;return a.a.createElement(x.a,{className:"mt-6 md:mt-0",to:"/movies/".concat(t)},a.a.createElement("img",{src:"https://image.tmdb.org/t/p/w200".concat(n)}))},j=function(){return a.a.createElement(g,null,a.a.createElement("div",{className:"bg-tmd-dark-green h-screen flex justify-center items-center"},a.a.createElement("div",{className:"max-w-sm rounded overflow-hidden shadow-lg bg-white p-10"},a.a.createElement("h1",{className:"text-2xl text-center"},"Ooops! Looks like you shouldn't be here!"),a.a.createElement("p",{className:"text-center mt-5"},"Click"," ",a.a.createElement("span",{className:"font-bold"},a.a.createElement(x.a,{"data-testid":"home-link",to:"/movies"},"HERE"))," ","to go back"))))};function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var O=function(e){return e<640?"xs":e>=640&&e<768?"sm":e>=768&&e<1024?"md":e>=1024&&e<1280?"lg":e>=1280?"xl":void 0},C=function(){var e=S(Object(r.useState)(function(){return O(window.innerWidth)}),2),t=e[0],n=e[1];return Object(r.useEffect)(function(){var e,t,r,a=(e=function(){n(O(window.innerWidth))},t=200,r=!1,function(){r||(e.call(),r=!0,setTimeout(function(){r=!1},t))});return window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}},[]),t},R=function(e){var t=e.cast;if(!t||0===t.length)return a.a.createElement("div",{className:"text-center font-bold text-xl"},"No Cast Data");return a.a.createElement("div",{className:"flex flex-wrap justify-center mt-2"},t.map(function(e,t){return a.a.createElement("div",{className:"flex justify-content items-center flex-col p-5",key:t},(n=e.profile_path,r=n?"https://image.tmdb.org/t/p/w264_and_h264_bestv2".concat(n):"http://placekitten.com/200/300",console.log("IMG: ",n),a.a.createElement("img",{className:"w-24 h-24 rounded-full",src:r})),a.a.createElement("p",{className:"font-bold"},e.name),a.a.createElement("p",{className:"italic"},e.character));var n,r}))},T=function(e){var t=e.reviews;if(!t||0===t.length)return a.a.createElement("div",{className:"text-center font-bold text-xl"},"No Review Data");return a.a.createElement("div",{className:"flex flex-wrap justify-between mt-5"},t.map(function(e,t){return a.a.createElement("div",{key:t,className:"mt-10 md:mt-0 w-full md:w-1/3"},a.a.createElement("p",{className:"text-center font-bold mt-4"},e.author),a.a.createElement("p",{className:"text-sm"},m(e.content,350,"...")))}))},M=function(e){var t=e.similar;if(!t||0===t.length)return a.a.createElement("div",{className:"text-center font-bold text-xl"},"No Similar Data");return a.a.createElement("div",{className:"flex flex-wrap justify-around mt-6"},t.map(function(e,t){return a.a.createElement(k,{key:t,id:e.id,poster_path:e.poster_path})}))},I=function(e){var t=e.selectedMovie;if(u(t))return null;var n=t.similar,r=t.reviews,o=t.cast,c=t.info,l=c.title,i=c.poster_path,s=c.overview,m=c.imdb_id,d=c.backdrop_path,f=c.tagline,p=c.genres;return a.a.createElement("div",null,a.a.createElement("div",{style:d?{backgroundImage:"url(https://image.tmdb.org/t/p/original".concat(d,"), linear-gradient(rgba(0,0,0,0.5),rgba(0,0,0,0.5))"),backgroundBlendMode:"overlay"}:{backgroundColor:"black"}},a.a.createElement("h1",{className:"text-6xl font-bold text-center text-white pt-5"},l),a.a.createElement("h1",{className:"text-xl font-bold text-center text-white"},f),a.a.createElement("div",{className:"mt-5 p-10"},a.a.createElement("div",{className:"rounded overflow-hidden shadow-lg bg-white flex p-5"},a.a.createElement("div",{className:"w-1/5"},a.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500".concat(i)}),a.a.createElement("a",{className:"no-underline hover:underline text-blue-500",target:"_blank",href:"https://www.imdb.com/title/".concat(m)},"Find out more")),a.a.createElement("div",{className:"w-4/5 pl-5"},p.map(function(e,t){return a.a.createElement(N,{color:"",key:t},e.name)}),a.a.createElement("h3",{className:"text-2xl font-bold mt-2"},"Overview"),a.a.createElement("p",null,s),a.a.createElement("p",null,"IMDB:"," ",a.a.createElement("a",{className:"no-underline hover:underline text-blue-500",target:"_blank",href:"https://www.imdb.com/title/".concat(m)},"Find out more")))))),a.a.createElement("section",{id:"cast"},a.a.createElement("h1",{className:"text-black text-center mt-4 font-bold text-4xl"},"Cast"),a.a.createElement(R,{cast:o.slice(0,4)})),a.a.createElement("section",{id:"reviews",className:"rounded overflow-hidden shadow-lg bg-gray-400 flex p-5 flex-col m-10"},a.a.createElement("h1",{className:"text-black text-center mt-3 font-bold text-3xl"},"Reviews"),a.a.createElement(T,{reviews:r.slice(0,2)})),a.a.createElement("section",{id:"similar",className:"p-10"},a.a.createElement("h1",{className:"text-black text-center mt-3 font-bold text-3xl"},"Other Similar Choices"),a.a.createElement(M,{similar:n.slice(0,3)})))},A=function(e){var t=e.movies;return a.a.createElement("div",{className:"p-10"},a.a.createElement("h1",{className:"text-center text-3xl font-bold"},"Popular Movies"),a.a.createElement("div",{className:"flex justify-center flex-wrap"},t.map(function(e,t){return a.a.createElement("div",{key:t,className:"p-5"},a.a.createElement(k,{id:e.id,poster_path:e.poster_path}))})))};function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var L=function(){var e=D(a.a.useState({}),2),t=e[0],n=e[1],r=D(a.a.useState([]),2),c=r[0],l=r[1],i=Object(o.h)(),m=Object(o.g)().pathname;return a.a.useEffect(function(){i.movieID||s.latestMovies().then(function(e){return l(e.results.splice(0,3))})},[i.movieID]),a.a.useEffect(function(){window.scrollTo(0,0)},[m]),a.a.useEffect(function(){u(i)?n({}):s.fetchMovieMeta(i.movieID).then(function(e){var t,r=(t=e,["adult","belongs_to_collection","original_language","original_title","popularity","production_companies","spoken_languages","video"].forEach(function(e){return delete t[0][e]}),["id","page","total_pages","total_results"].forEach(function(e){return delete t[1][e]}),["id","crew"].forEach(function(e){return delete t[2][e]}),["id","page","total_pages","total_results"].forEach(function(e){return delete t[3][e]}),{info:t[0],reviews:t[1].results,cast:t[2].cast,similar:t[3].results});n(r)}).catch(function(e){console.log("Error: ",e)})},[i.movieID]),u(t)?a.a.createElement(A,{movies:c}):a.a.createElement(I,{selectedMovie:t||{}})};function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var B=function(e){var t=e.onSearchChange,n=P(a.a.useState(""),2),r=n[0],o=n[1];return a.a.createElement(b,{value:r,placeholder:"Enter movie title...",onChange:function(e){o(e.currentTarget.value),t(e.currentTarget.value)}})},U=function(e){var t=Object(o.h)(),n=e.onChange,r=e.results,c=e.onRowClick;function l(e){c(e.id)}return t.movieID?a.a.createElement("div",null,a.a.createElement(L,null),";"):a.a.createElement("div",{className:"flex justify-center h-full"},a.a.createElement("div",{className:"w-3/5 mt-10"},a.a.createElement("div",{className:"flex items-center"},a.a.createElement(B,{onSearchChange:n})),a.a.createElement("section",{id:"table-wrapper",className:"mt-10 text-sm"},function(){if(r.length>0){var e=f(r);return a.a.createElement(E,{loading:!1,onRowClick:l,type:"auto",data:e})}return null}())))},z=n("./src/pages/home/home.module.scss"),W=function(e){var t=e.onChange,n=e.results,r=e.onRowClick;function o(e){r(e.id)}return a.a.createElement("div",{className:"flex bg-tmd-dark-green justify-center p-20 pt-32"},a.a.createElement("div",{className:"flex rounded shadow-lg bg-white w-screen",style:{maxWidth:1300}},a.a.createElement("div",{className:"md:w-32/6 lg:w-2/6 p-10 bg-tmd-blue ".concat(z.search_container)},a.a.createElement(B,{onSearchChange:t}),a.a.createElement("section",{id:"table-wrapper",className:"mt-10 text-sm"},function(){if(n.length>0){var t=f(n);return a.a.createElement(E,{loading:!1,onRowClick:o,type:"auto",data:t})}return e.loading?a.a.createElement("div",null,a.a.createElement(y,null)):null}())),a.a.createElement("div",null,a.a.createElement(L,null))))};function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){F(e,t,n[t])})}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=function(e,t){switch(t.type){case"RESULTS_FETCH":case"RESULTS_ERROR":return q({},e);case"RESULTS_RECIEVE":return q({},e,{movies:t.payload});default:return e}};function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var G={movies:[]},H=function(){var e=C(),t=Object(o.f)(),n=V(a.a.useState("desktop"),2),r=n[0],c=n[1],l=V(a.a.useState(!1),2),i=l[0],u=l[1],m=V(a.a.useReducer(J,G),2),d=m[0],f=m[1];a.a.useEffect(function(){c("xs"===e||"sm"===e||"md"===e?"mobile":"desktop")},[e]);var p,h,v,E=function(e){return function e(t,n){var r,a=[];u(!0),f({type:"RESULTS_RECIEVE",payload:[]}),s.searchMovie(t).then(function(o){r=o.total_pages;var c=1;!function o(){s.searchMovie(t,c).then(function(t){a.push(t.results),t.page<r&&t.page<4?o():0===t.total_results?e(n,""):(u(!1),f({type:"RESULTS_RECIEVE",payload:a.flat()}))}).catch(function(e){u(!1),console.log("ERRROR: ",e)}),c++}()}).catch(function(e){u(!1),console.log("ERROR",e)})}(e)},b=(p=function(e){E(e)},h=500,function(){var e=this,t=arguments;clearTimeout(v),v=setTimeout(function(){return p.apply(e,t)},h)});function w(e){e.preventDefault()}var y=function(e){return t.push("/movies/".concat(e))};return a.a.createElement(g,{mobile:"mobile"===r},"mobile"===r?a.a.createElement(U,{loading:i,results:d.movies,onSubmit:w,onChange:b,onRowClick:y}):a.a.createElement(W,{loading:i,results:d.movies,onSubmit:w,onChange:b,onRowClick:y}))};n.d(t,"b",function(){return j}),n.d(t,"a",function(){return H})},"./src/routes.tsx":function(e,t,n){"use strict";(function(e){var r=n("./node_modules/react/index.js"),a=n.n(r),o=n("./node_modules/react-hot-loader/index.js"),c=n("./node_modules/react-router/esm/react-router.js"),l=n("./node_modules/history/esm/history.js"),i=n("./src/pages/index.ts"),s=Object(l.a)();t.a=Object(o.hot)(e)(function(){return a.a.createElement(c.b,{history:s},a.a.createElement(c.c,null,a.a.createElement(c.a,{exact:!0,path:["/movies","/movies/:movieID"],component:i.a}),a.a.createElement(c.a,{component:i.b})))})}).call(this,n("./node_modules/webpack/buildin/harmony-module.js")(e))},"./src/shared/components/loader/styles.module.scss":function(e,t,n){e.exports={loader:"loader_38Ebfu6K",spin:"spin_1v8vUpSq"}},"./src/shared/styles/index.scss":function(e,t,n){}},[["./src/index.tsx",1,2]]]);